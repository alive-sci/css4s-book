<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.27">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>4&nbsp; Diffusion – Agent-based modeling for sustainability</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./cooperation.html" rel="next">
<link href="./writing.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-461959a8d42c1557bf4d45ac26041a3a.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark-b2ac4f073dc9ae3e7c4033d9166d02d9.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-461959a8d42c1557bf4d45ac26041a3a.css" rel="stylesheet" class="quarto-color-scheme-extra" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-547fb970f9e047296efeb96080bd9f79.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark-0d55bb5093a29b6ce49ba0fc2ed9a1c3.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="site_libs/bootstrap/bootstrap-547fb970f9e047296efeb96080bd9f79.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme-extra" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<!-- header.html -->
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@200;300;400;500;600;700&amp;family=Source+Code+Pro:wght@400;500;600;700&amp;display=swap">



</head>

<body class="nav-sidebar floating quarto-light"><script id="quarto-html-before-body" type="application/javascript">
    const toggleBodyColorMode = (bsSheetEl) => {
      const mode = bsSheetEl.getAttribute("data-mode");
      const bodyEl = window.document.querySelector("body");
      if (mode === "dark") {
        bodyEl.classList.add("quarto-dark");
        bodyEl.classList.remove("quarto-light");
      } else {
        bodyEl.classList.add("quarto-light");
        bodyEl.classList.remove("quarto-dark");
      }
    }
    const toggleBodyColorPrimary = () => {
      const bsSheetEl = window.document.querySelector("link#quarto-bootstrap:not([rel=disabled-stylesheet])");
      if (bsSheetEl) {
        toggleBodyColorMode(bsSheetEl);
      }
    }
    window.setColorSchemeToggle = (alternate) => {
      const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
      for (let i=0; i < toggles.length; i++) {
        const toggle = toggles[i];
        if (toggle) {
          if (alternate) {
            toggle.classList.add("alternate");
          } else {
            toggle.classList.remove("alternate");
          }
        }
      }
    };
    const toggleColorMode = (alternate) => {
      // Switch the stylesheets
      const primaryStylesheets = window.document.querySelectorAll('link.quarto-color-scheme:not(.quarto-color-alternate)');
      const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
      manageTransitions('#quarto-margin-sidebar .nav-link', false);
      if (alternate) {
        // note: dark is layered on light, we don't disable primary!
        enableStylesheet(alternateStylesheets);
        for (const sheetNode of alternateStylesheets) {
          if (sheetNode.id === "quarto-bootstrap") {
            toggleBodyColorMode(sheetNode);
          }
        }
      } else {
        disableStylesheet(alternateStylesheets);
        enableStylesheet(primaryStylesheets)
        toggleBodyColorPrimary();
      }
      manageTransitions('#quarto-margin-sidebar .nav-link', true);
      // Switch the toggles
      window.setColorSchemeToggle(alternate)
      // Hack to workaround the fact that safari doesn't
      // properly recolor the scrollbar when toggling (#1455)
      if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
        manageTransitions("body", false);
        window.scrollTo(0, 1);
        setTimeout(() => {
          window.scrollTo(0, 0);
          manageTransitions("body", true);
        }, 40);
      }
    }
    const disableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        stylesheet.rel = 'disabled-stylesheet';
      }
    }
    const enableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        if(stylesheet.rel !== 'stylesheet') { // for Chrome, which will still FOUC without this check
          stylesheet.rel = 'stylesheet';
        }
      }
    }
    const manageTransitions = (selector, allowTransitions) => {
      const els = window.document.querySelectorAll(selector);
      for (let i=0; i < els.length; i++) {
        const el = els[i];
        if (allowTransitions) {
          el.classList.remove('notransition');
        } else {
          el.classList.add('notransition');
        }
      }
    }
    const isFileUrl = () => {
      return window.location.protocol === 'file:';
    }
    window.hasAlternateSentinel = () => {
      let styleSentinel = getColorSchemeSentinel();
      if (styleSentinel !== null) {
        return styleSentinel === "alternate";
      } else {
        return false;
      }
    }
    const setStyleSentinel = (alternate) => {
      const value = alternate ? "alternate" : "default";
      if (!isFileUrl()) {
        window.localStorage.setItem("quarto-color-scheme", value);
      } else {
        localAlternateSentinel = value;
      }
    }
    const getColorSchemeSentinel = () => {
      if (!isFileUrl()) {
        const storageValue = window.localStorage.getItem("quarto-color-scheme");
        return storageValue != null ? storageValue : localAlternateSentinel;
      } else {
        return localAlternateSentinel;
      }
    }
    const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
      const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
      const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
      let newTheme = '';
      if(darkModeDefault) {
        newTheme = isAlternate ? baseTheme : alternateTheme;
      } else {
        newTheme = isAlternate ? alternateTheme : baseTheme;
      }
      const changeGiscusTheme = () => {
        // From: https://github.com/giscus/giscus/issues/336
        const sendMessage = (message) => {
          const iframe = document.querySelector('iframe.giscus-frame');
          if (!iframe) return;
          iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
        }
        sendMessage({
          setConfig: {
            theme: newTheme
          }
        });
      }
      const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
      if (isGiscussLoaded) {
        changeGiscusTheme();
      }
    };
    const darkModeDefault = false;
      document.querySelector('link#quarto-text-highlighting-styles.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
      document.querySelector('link#quarto-bootstrap.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
    let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
    // Dark / light mode switch
    window.quartoToggleColorScheme = () => {
      // Read the current dark / light value
      let toAlternate = !window.hasAlternateSentinel();
      toggleColorMode(toAlternate);
      setStyleSentinel(toAlternate);
      toggleGiscusIfUsed(toAlternate, darkModeDefault);
    };
    // Switch to dark mode if need be
    if (window.hasAlternateSentinel()) {
      toggleColorMode(true);
    } else {
      toggleColorMode(false);
    }
  </script>

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./diffusion.html"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Diffusion</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Agent-based modeling for sustainability</a> 
        <div class="sidebar-tools-main">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Welcome!</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./technical-intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Computational techniques for agent-based modeling</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./writing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Writing and project development</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./diffusion.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Diffusion</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cooperation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Cooperation by example of sustainable groundwater management</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./unfairness.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Modeling the origins of persistent gender inequality</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#primer-on-interventions" id="toc-primer-on-interventions" class="nav-link active" data-scroll-target="#primer-on-interventions"><span class="header-section-number">4.1</span> Primer on interventions</a></li>
  <li><a href="#comparing-seeding-strategies-for-interventions" id="toc-comparing-seeding-strategies-for-interventions" class="nav-link" data-scroll-target="#comparing-seeding-strategies-for-interventions"><span class="header-section-number">4.2</span> Comparing seeding strategies for interventions</a>
  <ul class="collapse">
  <li><a href="#motivation" id="toc-motivation" class="nav-link" data-scroll-target="#motivation"><span class="header-section-number">4.2.1</span> Motivation</a></li>
  <li><a href="#network-models-and-structure" id="toc-network-models-and-structure" class="nav-link" data-scroll-target="#network-models-and-structure"><span class="header-section-number">4.2.2</span> Network models and structure</a></li>
  <li><a href="#from-structure-to-simulation" id="toc-from-structure-to-simulation" class="nav-link" data-scroll-target="#from-structure-to-simulation"><span class="header-section-number">4.2.3</span> From structure to simulation</a></li>
  </ul></li>
  <li><a href="#the-general-diffusion-model" id="toc-the-general-diffusion-model" class="nav-link" data-scroll-target="#the-general-diffusion-model"><span class="header-section-number">4.3</span> The general diffusion model</a></li>
  <li><a href="#network-structure-patterns-that-shape-and-constrain-adaptation" id="toc-network-structure-patterns-that-shape-and-constrain-adaptation" class="nav-link" data-scroll-target="#network-structure-patterns-that-shape-and-constrain-adaptation"><span class="header-section-number">4.4</span> Network structure patterns that shape and constrain adaptation</a>
  <ul class="collapse">
  <li><a href="#the-good-and-the-bad-of-social-structure-and-long-range-ties" id="toc-the-good-and-the-bad-of-social-structure-and-long-range-ties" class="nav-link" data-scroll-target="#the-good-and-the-bad-of-social-structure-and-long-range-ties"><span class="header-section-number">4.4.1</span> The good and the bad of social structure and long-range ties</a></li>
  <li><a href="#homophily-choice-and-induced" id="toc-homophily-choice-and-induced" class="nav-link" data-scroll-target="#homophily-choice-and-induced"><span class="header-section-number">4.4.2</span> Homophily: choice and induced</a></li>
  <li><a href="#asymmetric-homophily-and-diffusion" id="toc-asymmetric-homophily-and-diffusion" class="nav-link" data-scroll-target="#asymmetric-homophily-and-diffusion"><span class="header-section-number">4.4.3</span> Asymmetric homophily and diffusion</a></li>
  <li><a href="#core-periphery-structure" id="toc-core-periphery-structure" class="nav-link" data-scroll-target="#core-periphery-structure"><span class="header-section-number">4.4.4</span> Core-periphery structure</a></li>
  <li><a href="#when-ties-break-cumulative-loss" id="toc-when-ties-break-cumulative-loss" class="nav-link" data-scroll-target="#when-ties-break-cumulative-loss"><span class="header-section-number">4.4.5</span> When ties break: cumulative loss</a></li>
  <li><a href="#modeling-implications" id="toc-modeling-implications" class="nav-link" data-scroll-target="#modeling-implications"><span class="header-section-number">4.4.6</span> Modeling implications</a></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion"><span class="header-section-number">4.4.7</span> Conclusion</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">


<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Diffusion</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>From whom and how we learn are essential components in explaining the puzzles of diffusion and belief change that underlie the transition to more sustainable practices. In this section we will introduce models of social behavior across different agent-based model configurations. The first chapter in this section introduces a general model of the diffusion of adaptations. Next, we show how models of cooperation can help us understand and predict outcomes in environmental management problems that require stakeholders to do the same behavior, using cooperation with groundwater usage limit laws within a water district as a prototypical example. Next we will present a related behavioral puzzle, that of why certain social norms like gender norms generate inequity and inequality, and point to how modeling social behavior can help us identify potential strategies for reaching more equitable equilibriums.</p>
<p>In the context of sustainability and climate adaptation, behavior change often depends not only on individual decisions but also on the social networks through which information and behaviors spread. This chapter examines how the structure of social networks influences the diffusion of adaptations—behaviors or practices that help people adjust to new risks or environmental conditions.</p>
<section id="primer-on-interventions" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="primer-on-interventions"><span class="header-section-number">4.1</span> Primer on interventions</h2>
<ul>
<li>Recall that a <em>sustainability intervention</em> is an effort to promote some sustainable behavior or set of behaviors through education, training, or other means.</li>
<li>In order to simulate interventions, we must develop a sub-model for interventions, starting with classification.
<ul>
<li>Our models of interventions will not be totally disconnected from models of the social systems themselves. Intervention models will specify the expected mode of transmission hypothesized to be most important for the design of the intervention.</li>
<li>Intervention models should specify the outcome variable. For now, we will use the simplest version of outcomes included by default in <code>socmod</code> agent-based model output.</li>
</ul></li>
</ul>
</section>
<section id="comparing-seeding-strategies-for-interventions" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="comparing-seeding-strategies-for-interventions"><span class="header-section-number">4.2</span> Comparing seeding strategies for interventions</h2>
<section id="motivation" class="level3" data-number="4.2.1">
<h3 data-number="4.2.1" class="anchored" data-anchor-id="motivation"><span class="header-section-number">4.2.1</span> Motivation</h3>
<p>We begin with a concrete example: health behavior interventions in rural Honduran villages. In a study by Aral and Christakis, the researchers used detailed network data to test whether targeting well-connected individuals could increase the spread of health-promoting behaviors. The intervention succeeded not because it directly reached everyone, but because the network structure amplified its effects.</p>
<p>This example also serves as the foundation for an agent-based modeling assignment in which we will explain how <em>computational experiments</em> help us understand and predict the effect of different seeding and other intervention strategies.</p>
<p>We will close by contrasting seeding strategies that ignore social structure, as in <span class="citation" data-cites="Airoldi2024">Airoldi and Christakis (<a href="references.html#ref-Airoldi2024" role="doc-biblioref">2024</a>)</span>, with those that leverage social structure, like <span class="citation" data-cites="Turner2023">Turner et al. (<a href="references.html#ref-Turner2023" role="doc-biblioref">2023</a>)</span>.</p>
</section>
<section id="network-models-and-structure" class="level3" data-number="4.2.2">
<h3 data-number="4.2.2" class="anchored" data-anchor-id="network-models-and-structure"><span class="header-section-number">4.2.2</span> Network models and structure</h3>
<p>To understand why structure matters, we explore a series of increasingly complex network models. We begin with <strong>deterministic models</strong>:</p>
<ul>
<li><strong>Ring networks</strong>, where each node is connected to a fixed number of neighbors.</li>
<li><strong>Complete networks</strong>, where every node is connected to every other node.</li>
</ul>
<p>These help us isolate basic features like clustering and distance. We then turn to <strong>stochastic models</strong>:</p>
<ul>
<li><strong>Erdős–Rényi random networks</strong>, where links are created with fixed probability.</li>
<li><strong>Watts–Strogatz small-world networks</strong>, which combine high local clustering with occasional long-range ties.</li>
</ul>
<p>The small-world model captures key features of real-world social networks: short average path lengths and local clustering. Examples from the original Watts and Strogatz paper—such as the U.S. power grid and the C. elegans neural network—illustrate how widespread these features are.</p>
<p>An unintuitive feature of many social networks is the <strong>friendship paradox</strong>: on average, your friends have more friends than you do. This emerges because well-connected individuals are more likely to appear in others’ networks. It affects who sees new behaviors early, who is most influential, and how we interpret network data. We include a visualization to illustrate this dynamic and emphasize the importance of precise language.</p>
</section>
<section id="from-structure-to-simulation" class="level3" data-number="4.2.3">
<h3 data-number="4.2.3" class="anchored" data-anchor-id="from-structure-to-simulation"><span class="header-section-number">4.2.3</span> From structure to simulation</h3>
<p>Agent-based models help us represent complexity by formalizing how <em>cognition</em> and <em>social structure</em> interact. Each component is modeled separately. <em>Cognition</em> refers to the processes agents use to evaluate and adopt behaviors—drawing on existing knowledge, experience, and social feedback. <em>Social structure</em> refers to constraints on who interacts with whom, shaped by acquaintanceship, geography, institutions, and chance. We model social structure as a <em>network</em>: a graph where <em>nodes</em> represent individuals and <em>edges</em> represent relationships through which information or influence can flow.</p>
<p>We design our simulations to evaluate different intervention strategies based on cognitive factors we deem most important, with social structure that is “good enough” for representing a real-world system. by vary which agents start with a given behavior or belief, a process often called <em>seeding</em>. For example, in a diffusion model, we might seed a behavior with the most connected individuals, a randomly selected group, or individuals located in a particular community. These differences allow us to explore how network structure interacts with initial conditions to shape diffusion outcomes—helping us identify strategies that are more robust, equitable, or efficient.</p>
</section>
</section>
<section id="the-general-diffusion-model" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="the-general-diffusion-model"><span class="header-section-number">4.3</span> The general diffusion model</h2>
<ol type="1">
<li><strong>Cognition</strong>: how agents evaluate new behaviors;</li>
<li><strong>Social behavior</strong>: how agents learn from others and adopt behaviors;</li>
<li><strong>Network structure</strong>: who interacts with whom.</li>
</ol>
<p>These components are modular, allowing us to isolate the effects of structure while holding behavior constant.</p>
<p><strong>MODEL SKETCH HERE OF GENERAL DIFFUSION MODEL</strong></p>
<ul>
<li>Behavior choice and learning</li>
<li>Group and social structure</li>
<li>Outcome measure: simulated success rate</li>
</ul>
<p>This flexible framework will carry through the rest of the course. In the next section, we extend this model to explore how homophily, asymmetry, and structural inequality affect adaptation outcomes.</p>
</section>
<section id="network-structure-patterns-that-shape-and-constrain-adaptation" class="level2" data-number="4.4">
<h2 data-number="4.4" class="anchored" data-anchor-id="network-structure-patterns-that-shape-and-constrain-adaptation"><span class="header-section-number">4.4</span> Network structure patterns that shape and constrain adaptation</h2>
<section id="the-good-and-the-bad-of-social-structure-and-long-range-ties" class="level3" data-number="4.4.1">
<h3 data-number="4.4.1" class="anchored" data-anchor-id="the-good-and-the-bad-of-social-structure-and-long-range-ties"><span class="header-section-number">4.4.1</span> The good and the bad of social structure and long-range ties</h3>
</section>
<section id="homophily-choice-and-induced" class="level3" data-number="4.4.2">
<h3 data-number="4.4.2" class="anchored" data-anchor-id="homophily-choice-and-induced"><span class="header-section-number">4.4.2</span> Homophily: choice and induced</h3>
<p><strong>Homophily</strong> is the tendency for similar individuals to associate. We distinguish two forms:</p>
<ul>
<li><strong>Choice homophily</strong>, where individuals actively prefer similar partners;</li>
<li><strong>Induced homophily</strong>, where external constraints (e.g., institutions, geography) create segregation even without conscious preference.</li>
</ul>
<p>Two empirical illustrations:</p>
<ul>
<li>An analysis of remote-work-eligible occupations shows clustering by education, income, and race.</li>
<li>A study of minority students in a mostly white MBA program finds that homophily can foster solidarity and resilience.</li>
</ul>
<p>These examples show that homophily can inhibit or support adaptation, depending on the context.</p>
<p>We also discuss experimental results from Centola (2010, 2011), which show that homophilous networks can outperform random ones in spreading health behaviors—especially when reinforcement and social learning are important.</p>
</section>
<section id="asymmetric-homophily-and-diffusion" class="level3" data-number="4.4.3">
<h3 data-number="4.4.3" class="anchored" data-anchor-id="asymmetric-homophily-and-diffusion"><span class="header-section-number">4.4.3</span> Asymmetric homophily and diffusion</h3>
<p>In some cases, homophily is <strong>asymmetric</strong>. One group (often the minority) is more exposed to the other than vice versa. In the “Minority Incubator, Majority Reservoir” model, this asymmetry allows minority-originating adaptations to diffuse outward more effectively.</p>
<p>This structural asymmetry isn’t necessarily intentional—it can emerge from how connections are formed. Yet it has real implications for diffusion, visibility, and adaptation speed.</p>
</section>
<section id="core-periphery-structure" class="level3" data-number="4.4.4">
<h3 data-number="4.4.4" class="anchored" data-anchor-id="core-periphery-structure"><span class="header-section-number">4.4.4</span> Core-periphery structure</h3>
<p>In a <strong>core-periphery</strong> network, a dense core of well-connected individuals is surrounded by a sparsely connected periphery. This structure supports fast diffusion through the core but may limit peripheral influence.</p>
<p>The South Pacific Island case provides an example: core-periphery organization enabled stable adaptation strategies under conditions of uncertainty and risk. These designs may emerge deliberately or organically.</p>
</section>
<section id="when-ties-break-cumulative-loss" class="level3" data-number="4.4.5">
<h3 data-number="4.4.5" class="anchored" data-anchor-id="when-ties-break-cumulative-loss"><span class="header-section-number">4.4.5</span> When ties break: cumulative loss</h3>
<p>To illustrate the consequences of broken connections, we turn to Henrich’s study of tool diversity in Oceania. When long-range maritime ties between islands broke down, isolated communities lost complex technologies.</p>
<p>This example highlights how network fragmentation can halt or reverse cumulative cultural evolution—a key dynamic in adaptation and innovation.</p>
</section>
<section id="modeling-implications" class="level3" data-number="4.4.6">
<h3 data-number="4.4.6" class="anchored" data-anchor-id="modeling-implications"><span class="header-section-number">4.4.6</span> Modeling implications</h3>
<p>Using the same agent-based model, we simulate diffusion on homophilous and core-periphery networks. Holding cognition and social behavior constant, we find:</p>
<ul>
<li>Some structures accelerate diffusion;</li>
<li>Some amplify inequality in who adopts adaptations;</li>
<li>Some slow or block spread entirely.</li>
</ul>
<p>These outcomes underscore the importance of network design in policy, development, and sustainability work.</p>
<!--
## Computational social science roots

One goal and theme of `socmod` is to avoid unneccesary theoretical commitments to either **epidemiological forcing**-style assumptions (e.g., using SI/SIS/SIR) or to **population genetics** (e.g., Kimura--Crow models) analyses that represent social learning as evolutionary selection. The **agent-based social learning** framework provided by socmod accommodates these or other various social behavior models. In the case of diffusion of adaptations, these formalisms share a common mathematical structure of **birth–death processes**.

We compare these modeling approaches in two ways: first, through their fixation dynamics under weak selection or forcing, and second, through how they each map to a birth–death framework. This is meant to situate users who think in either formalism to how they can map their domain knowledge onto socmod's framework for agent-based models of social behavior.

### Contagion, selection, and social learning

Fixation dynamics arise when a type, trait, or state spreads through a finite population until it completely replaces alternatives. Across epidemiology, population genetics, and social learning, this process can often be formalized using **birth–death models**, where individuals probabilistically transition between types.

The general structure is:

$$
\frac{dp}{dt} = \text{birth rate} \times (1 - p) - \text{death rate} \times p
$$

where $p(t)$ is the frequency of the type of interest at time $t$.

- **Birth rate** describes how often new instances of the type arise (e.g., infections, successful adoptions, reproductions).
- **Death rate** describes how often the type is lost (e.g., recoveries, abandonment, replacement by competitors).

In biological contexts, these are referred to as **birth–death processes**. However, for social learning of adaptive sustainable behaviors, a more accurate description would be **learning–unlearning processes**: individuals can adopt and later abandon behaviors depending on social influences, network structure, and environmental feedback.

Belief dynamics, which govern the spread and change of *internal* mental states rather than *observable* behaviors, differ substantially in mathematical structure. Nonetheless, belief dynamics can also exhibit **asymptotic, closed-form approximations** under appropriate assumptions.

We focus first on behavioral diffusion processes grounded in social learning. Belief dynamics and their distinct formal properties will be introduced and analyzed in the second part of this book.

In this section, we compare how fixation arises under weak selection or weak forcing in three domains: forcing models from epidemiology, population genetics models, and agent-based social learning models.

### Formal Models: Forcing, Genetic Drift, and Success Bias

In epidemiology, the spread of an infectious disease through a population can be captured by systems of ordinary differential equations (ODEs). For a simple SIS (Susceptible–Infected–Susceptible) model, the equations are:

$$
\frac{dS}{dt} = -\beta S I + \gamma I
$$
$$
\frac{dI}{dt} = \beta S I - \gamma I
$$

where:
- $S(t)$ and $I(t)$ are the proportions of susceptible and infected individuals at time $t$,
- $\beta$ is the transmission rate,
- $\gamma$ is the recovery rate.

Fixation of the infection (i.e., the infected state reaching $I=1$) occurs when transmission outpaces recovery, roughly when $\beta S > \gamma$. In small populations, stochastic drift also matters, especially when $I$ is small.

In population genetics, the probability of fixation of a new mutant allele can be approximated using Kimura and Crow's theory. In the simplest form under weak selection:

$$
\text{Fixation probability} \approx p_0 + s(1 - p_0)
$$

where:
- $p_0$ is the initial frequency of the mutant allele,
- $s$ is the selection coefficient (small positive or negative).

In neutral drift ($s=0$), the fixation probability equals $p_0$. When selection is weak but nonzero, the probability is shifted slightly toward the fitter allele.

In social learning models, especially those employing **success-biased learning**, the analogy to selection is direct. Agents are more likely to copy behaviors that have produced higher payoffs or success in the recent past. This introduces a **selection-like bias** in the replication of behaviors:

- **Drift** corresponds to random copying without regard to success.
- **Selection** corresponds to biased copying favoring higher-payoff behaviors.

Thus, success-biased social learning is mathematically analogous to weak selection in evolutionary models: both introduce a systematic force that, over time, increases the frequency of advantageous types.



### Comparison of diffusion conceptualizations

| Concept | Compartmental models (contagion) | Evolutionary models (selection) |
Social models (socmod) |
|:--|:--|:--|:--|
| **Entities** | People with infection states | Alleles at genetic loci | People with knowledge |
| **Dynamics** | Infection spread | Reproduction with selection | Social learning with drift and weak biases |
| **Fixation probability** | $\uparrow$ with $\alpha - \delta$ | $\uparrow$ with
$f_A - f_L$ | Contagion, evolution, other socio-cognitive |
| **Formalisms** | Stochastic/deterministic ODEs (SIS, SIR) [@anderson_may_1991; @keeling_rohani_2008] | Wright--Fisher, Moran, diffusion approximations [@crow_kimura_1970; @kimura_1962] | Agent-based simulations with probabilistic rules |

- **Forcing models** focus on infection and recovery dynamics.
- **Population genetics** tracks allele frequency changes via drift and selection.
- **Social learning** models behavioral adoption via social influence and drift.


### Birth–Death Process Mapping

| Formulation | Birth event | Death event |
|:--|:--|:--|
| **Contagion** | Infection (Susceptible $\to$ Infected) | Recovery (Infected $\to$ Susceptible) |
| **Evolution** | Allele reproduction (fitness-weighted) | Allele loss (death) |
| **Socmod**    | Social learning or individual discovery | Behavior abandonment |


All three systems feature:

- **Birth**: growth of a type or trait.
- **Death**: loss or replacement.
- **Drift and bias**: stochastic fluctuations and directional forces.

Key parallels:

There are 

- Strong success bias $\leftrightarrow$ strong selection.
- Random copying $\leftrightarrow$ neutral drift.
- Contagion learning $\leftrightarrow$ stochastic infection.


#### `socmod`: a framework for many models

**socmod** models, by tuning parameters such as success bias, frequency bias, transmission, and dropout rates, can replicate the core behaviors of both **population genetics** and **epidemiology**.


Thus, socmod models offer a flexible platform bridging epidemiology, evolutionary biology, and social dynamics.

-->
</section>
<section id="conclusion" class="level3" data-number="4.4.7">
<h3 data-number="4.4.7" class="anchored" data-anchor-id="conclusion"><span class="header-section-number">4.4.7</span> Conclusion</h3>
<p>To promote the spread of sustainable behavior we need to understand how behavior</p>
<p>Behaviors diffuse between people through social learning. But social structure, the benefit of adaptive behaviors, individual stubbornness, and ingroup preference all affect whether adaptive behaviors become prevalent.</p>


<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list" style="display: none">
<div id="ref-Airoldi2024" class="csl-entry" role="listitem">
Airoldi, Edoardo M., and Nicholas A. Christakis. 2024. <span>“<span class="nocase">Induction of social contagion for diverse outcomes in structured experiments in isolated villages</span>.”</span> <em>Science</em> 384 (6695). <a href="https://doi.org/10.1126/science.adi5147">https://doi.org/10.1126/science.adi5147</a>.
</div>
<div id="ref-Turner2023" class="csl-entry" role="listitem">
Turner, Matthew A., Alyson L. Singleton, Mallory J. Harris, Ian Harryman, Cesar Augusto Lopez, Ronan Forde Arthur, Caroline Muraida, and James Holland Jones. 2023. <span>“<span class="nocase">Minority-group incubators and majority-group reservoirs support the diffusion of climate change adaptations</span>.”</span> <em>Philosophical Transactions of the Royal Society B: Biological Sciences</em> 378 (1889). <a href="https://doi.org/10.1098/rstb.2022.0401">https://doi.org/10.1098/rstb.2022.0401</a>.
</div>
</div>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    // Ensure there is a toggle, if there isn't float one in the top right
    if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
      const a = window.document.createElement('a');
      a.classList.add('top-right');
      a.classList.add('quarto-color-scheme-toggle');
      a.href = "";
      a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
      const i = window.document.createElement("i");
      i.classList.add('bi');
      a.appendChild(i);
      window.document.body.appendChild(a);
    }
    window.setColorSchemeToggle(window.hasAlternateSentinel())
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./writing.html" class="pagination-link" aria-label="Writing and project development">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Writing and project development</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./cooperation.html" class="pagination-link" aria-label="Cooperation by example of sustainable groundwater management">
        <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Cooperation by example of sustainable groundwater management</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>